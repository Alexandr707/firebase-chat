{
  "messages":{
    "$chatId":{
      "$msgId":{
        ".read": true,
        ".write": "
          (auth.uid != null && !data.exists())  
          || (auth.uid === root.child('chats').child('$chatId').child('owner').val() 
          || auth.uid === root.child('messages').child('$chatId').child('$msgId').child('uid').val() 
          || root.child('chats').child('$chatId').child('moderators').child(auth.uid).exists()) && (!mewData.exists() || mewData.exists())
        ",   
      }
    }
    
  }
}


